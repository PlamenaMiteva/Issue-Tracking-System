<div class="row" ng-controller='AddProjectCtrl'>
    <div class="jumbotron">
        <h1 id="add-project-details">CREATE NEW PROJECT <button type="button" class="btn btn-primary pull-right btn-lg" id="createProjectBtn">Create Project</button></h1>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="createProjectModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="padding:35px 50px;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4><span class="glyphicon glyphicon-list"></span> CREATE PROJECT</h4>
                </div>
                <div class="modal-body" style="padding:40px 50px;">
                    <form role="form" name="addProjectForm">
                        <div class="form-group">
                            <label for="projectName"><span class="glyphicon glyphicon-list-alt"></span> Project Name</label>
                            <input type="text" class="form-control" id="projectName" placeholder="project name..." required="required" ng-model="project.Name">
                        </div>
                        <div class="form-group">
                            <label for="projectDescription"><span class="glyphicon glyphicon-pencil"></span> Project Description</label>
                            <input type="text" class="form-control" id="projectDescription" placeholder="project description...." required="required" ng-model="project.Description">
                        </div>
                        <div class="form-group">
                            <label for="projectKey"><span class="glyphicon glyphicon-lock"></span> Project Key</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="projectKey" name="projectKey" placeholder="project key...." required="required" ng-model="project.ProjectKey">
                                <span class="input-group-btn"><button class="btn btn-primary" id="check-key-btn" ng-click="checkKey(project.ProjectKey)"><span class="glyphicon glyphicon-ok"></span> </button></span>
                            </div>
                            <div class="error-message" ng-show = "!IsMatch && addProjectForm.projectKey.$dirty">
                                Project key should be generated by the first letters of the project name
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="projectLead"><span class="glyphicon glyphicon-user"></span> Project Manager</label>
                            <select class="form-control" id="projectLead" name="projectLead" ng-model="project.LeadId" required="required">
                                <option ng-repeat="user in users" value="{{user.Id}}">
                                    {{user.Username}}
                                </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="projectPriorities"><span class="glyphicon glyphicon-circle-arrow-up"></span> Project Priorities</label>
                            <div>
                                <pre><b>Project Priorities: </b><em><span ng-repeat="priority in project.Priorities">{{priority.Name}}{{$last ? '' : ', '}}</span></em></pre>
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" id="projectPriorities" placeholder="project priorities...." ng-model="priorityName">
                                <span class="input-group-btn"><button class="btn btn-primary" id="add-priority-btn" ng-click="addPriority(priorityName)">Add</button></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="projectLabels"><span class="glyphicon glyphicon-tags"></span> Labels</label>
                            <div>
                                <pre><b>Project Labels: </b><em><span ng-repeat="label in project.Labels">{{label.Name}}{{$last ? '' : ', '}}</span></em></pre>
                            </div>
                            <div class="input-group">
                                <input type="text" ng-model="asyncSelected" uib-typeahead="label as label.name for label in getAllLabels($viewValue)" class="form-control">
                                <span class="input-group-btn"><button class="btn btn-primary" id="add-label-btn" ng-click="addLabel(project.Labels, asyncSelected.name)">Add Label</button></span>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block" ng-disabled="addProjectForm.$invalid" ng-click="addProject(project)"><span class="glyphicon glyphicon-off"></span> Create</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#createProjectBtn").click(function () {
            $("#createProjectModal").modal();
        });
    });
</script>